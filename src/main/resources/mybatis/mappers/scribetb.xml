<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.ScribetbDAO">
    <insert id="scribe_p_insert">
    	<selectKey keyProperty="scribeno" order="BEFORE" resultType="int">
    		select ifnull(max(scribeno),0) + 1 
    		from scribetb
    		where authorid = #{authorid}
    	</selectKey>
		insert into scribetb(authorid, scribeno, scribeid, adate) 
				values(#{authorid}, #{scribeno}, #{scribeid}, now())
    </insert>
    
    <delete id="scribe_p_delete">
    	delete from scribetb
    	where authorid = #{authorid} and scribeid = #{scribeid}
    </delete>
</mapper>












